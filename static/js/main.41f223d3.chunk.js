(this["webpackJsonprisk-calc"]=this["webpackJsonprisk-calc"]||[]).push([[0],{15:function(e,t,n){e.exports=n(24)},20:function(e,t,n){},21:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),u=n.n(o),i=(n(20),n(1)),c=(n(21),n(8));function l(){var e=Object(c.a)(["\n  appearance: none;\n  padding: 0.75rem 1rem;\n  font-size: 1rem;\n  border: solid 1px ",";\n  color: ",";\n\n  &:focus,\n  &:hover {\n    text-decoration: underline;\n    outline: thin;\n  }\n\n  &:first-child {\n    border-radius: 0.25rem 0 0 0.25rem;\n  }\n\n  &:last-child {\n    border-radius: 0 0.25rem 0.25rem 0;\n  }\n"]);return l=function(){return e},e}var s=n(9).a.button(l(),(function(e){return e.selected?"blue":"grey"}),(function(e){return e.selected?"blue":"grey"})),m=function(e){var t=e.buttons,n=e.callback,o=Object(a.useState)(""),u=Object(i.a)(o,2),c=u[0],l=u[1];return r.a.createElement("div",{className:"radioButtons"},function(e){return e.map((function(e){var t=e.label,a=e.value;return r.a.createElement(s,{key:a,type:"button",selected:a===c,onClick:function(){return function(e){l(e),n(e)}(a)}},t)}))}(t))},d=n(2),f=n(3),h=(n(13),function(e){return e.sort((function(e,t){return e-t}))}),b=function(e){return e.sort((function(e,t){return t-e}))},p=new(function(){function e(t){Object(d.a)(this,e),this.VALUES=t}return Object(f.a)(e,[{key:"min",get:function(){return h(this.VALUES)[0]}},{key:"max",get:function(){return b(this.VALUES)[0]}}]),e}())([1,2,3,4,5,6]),v={"[3,2]":{"[2,0]":{default:.2926,ammoShortage:.1838,bunker:.3524},"[1,1]":{default:.3358,ammoShortage:.3057,bunker:.4084},"[0,2]":{default:.3716,ammoShortage:.5105,bunker:.2392}},"[2,2]":{"[2,0]":{default:.4483,ammoShortage:.3125,bunker:.5332},"[1,1]":{default:.3241,ammoShortage:.375,bunker:.3202},"[0,2]":{default:.2276,ammoShortage:.3125,bunker:.1466}},"[1,2]":{"[1,0]":{default:.7454,ammoShortage:.5787,bunker:.8611},"[0,1]":{default:.2546,ammoShortage:.4213,bunker:.1389}},"[3,1]":{"[1,0]":{default:.3403,ammoShortage:.1736,bunker:.5062},"[0,1]":{default:.6597,ammoShortage:.8264,bunker:.4938}},"[2,1]":{"[1,0]":{default:.4213,ammoShortage:.2546,bunker:.5833},"[0,1]":{default:.5787,ammoShortage:.7554,bunker:.4167}},"[1,1]":{"[1,0]":{default:.5833,ammoShortage:.4167,bunker:.7222},"[0,1]":{default:.4167,ammoShortage:.5833,bunker:.2778}}},k=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dice:p,defender:"",attacker:""},n=t.dice,a=t.defender,r=t.attacker;Object(d.a)(this,e),this.dice=n||p,this.defender=a||"",this.attacker=r||""},g=(new k,function(){function e(t){Object(d.a)(this,e),this.parent=null,this.children=[],this.rollPair=t}return Object(f.a)(e,[{key:"getRelativeProbability",value:function(e){return this.isRoot()?1:function(e,t,n,a){var r;null===a?r="default":a&&a.defender?("ammoShortage"===a.defender&&(r="ammoShortage"),"bunker"===a.defender&&(r="bunker")):r="default";var o="[".concat(e,",").concat(t,"]"),u="[".concat(n[0],",").concat(n[1],"]");return v[o][u][r]}(this.parent.maxAttackers,this.parent.maxDefenders,this.lossFromParent,e)}},{key:"getRootProbability",value:function(e){return function t(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a.push(n.getRelativeProbability(e)),n.isRoot()||t(n.parent,a),a}(this).reduce((function(e,t){return e*t}))}},{key:"addChild",value:function(e){this.children.push(e)}},{key:"isLeaf",value:function(){return 0===this.children.length}},{key:"isRoot",value:function(){return null===this.parent}},{key:"getLeafProbabilities",value:function(e){return function t(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(n.isLeaf())return a.push({outcome:n.rollPair,probability:n.getRootProbability(e)}),a;for(var r=0;r<n.children.length;r++)t(n.children[r],a);return a}(this)}},{key:"makeOutcomesTree",value:function(){var t=[this.nAttackers,this.nDefenders],n=t[0],a=t[1];if(0===n||0===a)return this;for(var r=e.loseTroops(n,a),o=0;o<r.length;o++){var u=new e(r[o]);u.parent=this,u.makeOutcomesTree(),this.addChild(u)}return this}},{key:"getOdds",value:function(t){this.makeOutcomesTree();var n=this.getLeafProbabilities(t);return e.reduceOutcomes(n)}},{key:"nAttackers",get:function(){return this.rollPair[0]}},{key:"nDefenders",get:function(){return this.rollPair[1]}},{key:"maxAttackers",get:function(){return this.nAttackers>=3?3:this.nAttackers}},{key:"maxDefenders",get:function(){return this.nDefenders>=2?2:this.nDefenders}},{key:"depth",get:function(){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null===t.parent?n:e(t.parent,n+1)}(this)}},{key:"root",get:function(){return function e(t){return null===t.parent?t:e(t.parent)}(this)}},{key:"lossFromParent",get:function(){return null===this.parent?[0,0]:[this.parent.nAttackers-this.nAttackers,this.parent.nDefenders-this.nDefenders]}},{key:"leaves",get:function(){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t.isLeaf())return n.push(t),n;for(var a=0;a<t.children.length;a++)e(t.children[a],n);return n}(this)}}],[{key:"reduceOutcomes",value:function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n],r=a.outcome,o=a.probability,u=t.map((function(e){return e.outcome})).indexOf("".concat(r));u>=0?t[u].probability=t[u].probability+o:t.push({outcome:"".concat(r),probability:o})}return t}},{key:"loseTroops",value:function(e,t){var n=e>=2&&t>=2?2:1,a=[[e-n,t],[e,t-n]];if(2===n){a.push([e-1,t-1]);var r=[a[2],a[1]];a[1]=r[0],a[2]=r[1]}return a}}]),e}()),_=function(){var e=Object(a.useState)(3),t=Object(i.a)(e,2),n=t[0],o=t[1],u=Object(a.useState)(2),c=Object(i.a)(u,2),l=c[0],s=c[1],d=Object(a.useState)({defender:""}),f=Object(i.a)(d,2),h=f[0],b=f[1],p=Object(a.useState)([]),v=Object(i.a)(p,2),k=v[0],_=v[1],y=Object(a.useState)([]),E=Object(i.a)(y,2),N=E[0],S=E[1],O=function(e){var t=100*parseFloat(e);return"".concat(t.toFixed(2),"%")},F=function(e,t){var n="--";return e.length>0&&(n=e.map((function(e){return e.probability})).reduce((function(e,t){return e+t})),n=O(n)),r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"outcomesTable__columnLabel"},t),r.a.createElement("p",{className:"outcomesTable__columnTotal"},n))},A=function(e){var t=e.map((function(e){return r.a.createElement("div",{className:"outcomesTable__outcomeItem",key:e.outcome},r.a.createElement("p",null,e.outcome),r.a.createElement("p",null,O(e.probability)))}));return r.a.createElement("ul",{className:"outcomesTable__outcomesList"},r.a.createElement("div",{className:"outcomesTable__outcomeItemLabel"},r.a.createElement("p",null,"Outcome"),r.a.createElement("p",null,"Probability")),t)};return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"appHeader"},r.a.createElement("p",{className:"appHeader__title"},"Risk Legacy"),r.a.createElement("p",{className:"appHeader__subtitle"},"Battle Odds Calculator")),r.a.createElement("div",{className:"outcomesTable"},r.a.createElement("div",{className:"outcomesTable__column"},F(k,"Attacker Wins"),A(k)),r.a.createElement("div",{className:"outcomesTable__column"},F(N,"Attacker Loses"),A(N))),r.a.createElement("form",{className:"inputsForm",onSubmit:function(e){return function(e){e.preventDefault();for(var t=new g([n,l]).getOdds(h),a=[],r=[],o=0;o<t.length;o++)"0"!==t[o].outcome[0]?a.push(t[o]):r.push(t[o]);_(a),S(r)}(e)}},r.a.createElement("div",{className:"inputsForm__section troopCount"},r.a.createElement("p",{className:"inputsForm__sectionLabel"},"Troops"),r.a.createElement("div",{className:"troopsInput"},r.a.createElement("div",{className:"inputsForm__input troopsInput__rowItem"},r.a.createElement("label",{className:"inputsForm__inputLabel",htmlFor:"numAttackers"},"Attackers"),r.a.createElement("div",{className:"inputsForm__inputField"},r.a.createElement("input",{type:"number",required:!0,name:"numAttackers",id:"numAttackers",min:"1",max:"15",value:n,placeholder:"0",onChange:function(e){return o(e.target.value)}}))),r.a.createElement("div",{className:"inputsForm__input troopsInput__rowItem"},r.a.createElement("label",{className:"inputsForm__inputLabel",htmlFor:"numDefenders"},"Defenders"),r.a.createElement("div",{className:"inputsForm__inputField"},r.a.createElement("input",{type:"number",required:!0,name:"numDefenders",id:"numDefenders",min:"1",max:"15",value:l,placeholder:"0",onChange:function(e){return s(e.target.value)}}))))),r.a.createElement("div",{className:"inputsForm__section"},r.a.createElement("p",{className:"inputsForm__sectionLabel"},"Modifiers"),r.a.createElement("div",{className:"inputsForm__input"},r.a.createElement("label",{htmlFor:"defenderModifiers"},"Territory Scar"),r.a.createElement("div",{className:"inputsForm__inputField"},r.a.createElement(m,{buttons:[{value:"",label:"None"},{value:"bunker",label:"Bunker"},{value:"ammoShortage",label:"Ammo Shortage"}],callback:function(e){b({defender:e})}})))),r.a.createElement("button",{className:"inputsForm__submit",type:"submit",autoFocus:!0},"Calculate")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.41f223d3.chunk.js.map